<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>√Årbol de Amor - 14 de Febrero</title>

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }

    body {
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: radial-gradient(circle at top, #ff4d6d, #c9184a);
      overflow: hidden;
    }

    .card {
      background: #f3e8dc;
      border-radius: 30px;
      padding: 30px;
      width: 900px;
      max-width: 95vw;
      box-shadow: 0 25px 50px rgba(0,0,0,0.3);
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      align-items: center;
      opacity: 0;
      transform: translateY(40px);
      transition: 1s ease;
    }

    .card.show { opacity: 1; transform: translateY(0); }

    .texto {
      color: #333;
      line-height: 1.8;
      font-size: 1.15rem;
      min-height: 180px;
    }

    .tiempo { margin-top: 20px; font-weight: bold; }

    canvas { width: 100%; height: 420px; }

    @media (max-width: 700px) {
      .card { grid-template-columns: 1fr; text-align: center; }
      canvas { height: 320px; }
    }
  </style>
</head>
<body>

  <div class="card" id="card">

    <div class="texto" id="texto"></div>

    <canvas id="treeCanvas"></canvas>

  </div>

  <script>
    const canvas = document.getElementById('treeCanvas');
    const ctx = canvas.getContext('2d');
    const card = document.getElementById('card');
    const texto = document.getElementById('texto');

    canvas.width = 420;
    canvas.height = 420;

    let branches = [];
    let petals = [];

    // üå≥ RAMAS CURVAS formando coraz√≥n
    function drawBranch(x, y, len, angle, depth) {
      if (depth === 0) return;

      const curve = 0.3 * (Math.random() - 0.5);
      const x2 = x + len * Math.cos(angle + curve);
      const y2 = y - len * Math.sin(angle + curve);

      branches.push({ x, y, x2, y2 });

      setTimeout(() => {
        drawBranch(x2, y2, len * 0.72, angle - 0.5, depth - 1);
        drawBranch(x2, y2, len * 0.72, angle + 0.5, depth - 1);

        // p√©talos en forma de coraz√≥n
        if (depth === 1) {
          for (let i = 0; i < 8; i++) {
            petals.push({
              x: x2 + Math.random() * 14 - 7,
              y: y2 + Math.random() * 14 - 7,
              size: 6 + Math.random() * 6,
              alpha: 0
            });
          }
        }
      }, 220);
    }

    function drawHeart(x, y, size, alpha) {
      ctx.save();
      ctx.translate(x, y);
      ctx.scale(size / 10, size / 10);
      ctx.globalAlpha = alpha;

      ctx.beginPath();
      ctx.moveTo(0, 0);
      ctx.bezierCurveTo(0, -3, -5, -3, -5, 0);
      ctx.bezierCurveTo(-5, 3, 0, 5, 0, 8);
      ctx.bezierCurveTo(0, 5, 5, 3, 5, 0);
      ctx.bezierCurveTo(5, -3, 0, -3, 0, 0);
      ctx.fillStyle = '#e63946';
      ctx.fill();

      ctx.restore();
    }

    function animate() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      ctx.lineWidth = 2.2;
      ctx.strokeStyle = '#6b3e26';

      branches.forEach(b => {
        ctx.beginPath();
        ctx.moveTo(b.x, b.y);
        ctx.lineTo(b.x2, b.y2);
        ctx.stroke();
      });

      petals.forEach(p => {
        if (p.alpha < 1) p.alpha += 0.02;
        drawHeart(p.x, p.y, p.size, p.alpha);
      });

      requestAnimationFrame(animate);
    }

    // ‚ú® TEXTO palabra por palabra
    const mensaje = `Para T√≠ por ser especial:\n\nSi pudiera elegir un lugar seguro, ser√≠a a tu lado.\n\nMe dijeron que para enamorarte, tenia que hacerte sonreir.\n\nPero cada vez que sonries, soy el que se enamora\n\n‚Äî Te quiero ‚Äî`;

    function escribirTexto(i = 0) {
      if (i >= mensaje.length) {
        iniciarContador();
        return;
      }

      texto.innerHTML = mensaje.slice(0, i).replace(/\n/g, '<br>');
      setTimeout(() => escribirTexto(i + 1), 35);
    }

    // ‚è± CONTADOR
    const inicio = new Date('2025-11-22T00:00:00');

    function iniciarContador() {
      const contador = document.createElement('div');
      contador.className = 'tiempo';
      texto.appendChild(contador);

      function actualizar() {
        const ahora = new Date();
        const diff = ahora - inicio;

        const segundos = Math.floor(diff / 1000) % 60;
        const minutos = Math.floor(diff / 60000) % 60;
        const horas = Math.floor(diff / 3600000) % 24;
        const dias = Math.floor(diff / 86400000);

        contador.textContent = `Mi amor por ti comenz√≥ hace‚Ä¶ ${dias} d√≠as ${horas} horas ${minutos} minutos ${segundos} segundos`;
      }

      actualizar();
      setInterval(actualizar, 1000);
    }

    // üöÄ SECUENCIA
    setTimeout(() => {
      card.classList.add('show');

      drawBranch(canvas.width / 2, canvas.height, 90, Math.PI / 2, 8);
      animate();

      // esperar a que el √°rbol termine
      setTimeout(() => {
        escribirTexto();
      }, 4200);

    }, 400);
  </script>

</body>
</html>
